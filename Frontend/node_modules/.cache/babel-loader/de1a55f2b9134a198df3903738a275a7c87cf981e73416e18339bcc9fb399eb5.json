{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cheta\\\\OneDrive\\\\Desktop\\\\Hackathon\\\\Frontend\\\\src\\\\component\\\\admin\\\\EditBookingPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport ApiService from '../../service/ApiService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditBookingPage = () => {\n  _s();\n  var _bookingDetails$user, _bookingDetails$room;\n  const navigate = useNavigate();\n  const {\n    bookingCode\n  } = useParams();\n  const [bookingDetails, setBookingDetails] = useState(null);\n  const [error, setError] = useState(null);\n  const [success, setSuccessMessage] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (!bookingCode || bookingCode === 'undefined') {\n      showError('Invalid booking code.');\n      setLoading(false);\n      return;\n    }\n    const fetchData = async () => {\n      try {\n        const bookingRes = await ApiService.getBookingByConfirmationCode(bookingCode);\n        setBookingDetails(bookingRes.booking || bookingRes);\n      } catch (err) {\n        var _err$response, _err$response$data;\n        showError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [bookingCode]);\n  const showError = msg => {\n    setError(msg);\n    setTimeout(() => setError(null), 2000);\n  };\n  const showSuccess = msg => {\n    setSuccessMessage(msg);\n    setTimeout(() => {\n      setSuccessMessage(null);\n      navigate('/admin/manage-bookings');\n    }, 2000);\n  };\n  const deleteBooking = async () => {\n    if (!window.confirm('Are you sure you want to permanently delete this booking?')) return;\n    try {\n      const response = await ApiService.cancelBooking(bookingDetails.id);\n      if (response.status === 200 || response.statusCode === 200) {\n        showSuccess(\"Booking deleted successfully. User notified.\");\n      }\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      showError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || err.message);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"loading-message\",\n    children: \"Loading booking details...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"edit-booking-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"page-title\",\n      children: \"Booking Detail\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert success\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 19\n    }, this), bookingDetails && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booking-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Booking Info\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Confirmation Code:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 14\n        }, this), \" \", bookingDetails.bookingConfirmationCode]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Check-in Date:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 14\n        }, this), \" \", bookingDetails.checkInDate]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"User Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 14\n        }, this), \" \", bookingDetails.guestEmail || ((_bookingDetails$user = bookingDetails.user) === null || _bookingDetails$user === void 0 ? void 0 : _bookingDetails$user.email)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Room Type:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 14\n        }, this), \" \", (_bookingDetails$room = bookingDetails.room) === null || _bookingDetails$room === void 0 ? void 0 : _bookingDetails$room.roomType]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"delete-btn\",\n          onClick: deleteBooking,\n          children: \"Delete Booking\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-btn\",\n          onClick: () => navigate(-1),\n          children: \"Go Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(EditBookingPage, \"kWU95TSGRGd77qzQGB3/EOacT78=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = EditBookingPage;\nexport default EditBookingPage;\nvar _c;\n$RefreshReg$(_c, \"EditBookingPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ApiService","jsxDEV","_jsxDEV","EditBookingPage","_s","_bookingDetails$user","_bookingDetails$room","navigate","bookingCode","bookingDetails","setBookingDetails","error","setError","success","setSuccessMessage","loading","setLoading","showError","fetchData","bookingRes","getBookingByConfirmationCode","booking","err","_err$response","_err$response$data","response","data","message","msg","setTimeout","showSuccess","deleteBooking","window","confirm","cancelBooking","id","status","statusCode","_err$response2","_err$response2$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","bookingConfirmationCode","checkInDate","guestEmail","user","email","room","roomType","onClick","_c","$RefreshReg$"],"sources":["C:/Users/cheta/OneDrive/Desktop/Hackathon/Frontend/src/component/admin/EditBookingPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport ApiService from '../../service/ApiService';\n\nconst EditBookingPage = () => {\n  const navigate = useNavigate();\n  const { bookingCode } = useParams();\n\n  const [bookingDetails, setBookingDetails] = useState(null);\n  const [error, setError] = useState(null);\n  const [success, setSuccessMessage] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!bookingCode || bookingCode === 'undefined') {\n      showError('Invalid booking code.');\n      setLoading(false);\n      return;\n    }\n\n    const fetchData = async () => {\n      try {\n        const bookingRes = await ApiService.getBookingByConfirmationCode(bookingCode);\n        setBookingDetails(bookingRes.booking || bookingRes);\n      } catch (err) {\n        showError(err.response?.data?.message || err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [bookingCode]);\n\n  const showError = (msg) => {\n    setError(msg);\n    setTimeout(() => setError(null), 2000);\n  };\n\n  const showSuccess = (msg) => {\n    setSuccessMessage(msg);\n    setTimeout(() => {\n      setSuccessMessage(null);\n      navigate('/admin/manage-bookings');\n    }, 2000);\n  };\n\n  const deleteBooking = async () => {\n    if (!window.confirm('Are you sure you want to permanently delete this booking?')) return;\n\n    try {\n      const response = await ApiService.cancelBooking(bookingDetails.id);\n      if (response.status === 200 || response.statusCode === 200) {\n        showSuccess(\"Booking deleted successfully. User notified.\");\n      }\n    } catch (err) {\n      showError(err.response?.data?.message || err.message);\n    }\n  };\n\n  if (loading) return <p className=\"loading-message\">Loading booking details...</p>;\n\n  return (\n    <div className=\"edit-booking-container\">\n      <h2 className=\"page-title\">Booking Detail</h2>\n\n      {error && <div className=\"alert error\">{error}</div>}\n      {success && <div className=\"alert success\">{success}</div>}\n\n      {bookingDetails && (\n        <div className=\"booking-card\">\n          <h3>Booking Info</h3>\n          <p><strong>Confirmation Code:</strong> {bookingDetails.bookingConfirmationCode}</p>\n          <p><strong>Check-in Date:</strong> {bookingDetails.checkInDate}</p>\n          <p><strong>User Email:</strong> {bookingDetails.guestEmail || bookingDetails.user?.email}</p>\n          <p><strong>Room Type:</strong> {bookingDetails.room?.roomType}</p>\n\n          <div className=\"button-group\">\n            <button className=\"delete-btn\" onClick={deleteBooking}>Delete Booking</button>\n            <button className=\"back-btn\" onClick={() => navigate(-1)}>Go Back</button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EditBookingPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}